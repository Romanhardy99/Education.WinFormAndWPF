<img src="images/winapi.jpg" alt="Winapi" width="1000">

# –û—Å–Ω–æ–≤—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Win32 API

1. –ß—Ç–æ —Ç–∞–∫–æ–µ **Win32 API**
>Win32 API ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Windows.\
>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –æ–∫–æ–Ω–Ω–æ–π –ø–æ–¥—Å–∏—Å—Ç–µ–º–æ–π –û–° —á–µ—Ä–µ–∑:
>* —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–ª–∞—Å—Å–æ–≤ –æ–∫–æ–Ω
>* —Å–æ–∑–¥–∞–Ω–∏–µ –æ–∫–æ–Ω –∏ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
>* —Ü–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π
>* –æ–∫–æ–Ω–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É (WndProc)\
>Win32 ‚Äî —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å.\
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Å–∞–º–∞ –Ω–∏—á–µ–≥–æ –Ω–µ ‚Äú–æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç‚Äù ‚Äî –æ–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –û–°.

2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Windows-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
>–õ—é–±–æ–µ WinAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 4 –∫–ª—é—á–µ–≤—ã—Ö —á–∞—Å—Ç–µ–π:
>* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ –æ–∫–Ω–∞
>* –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞
>* –¶–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π
>* –û–∫–æ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ (WndProc - Window Procedure)

2.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ –æ–∫–Ω–∞
```
WNDCLASSEX wc = {};
wc.lpfnWndProc = WndProc;
wc.lpszClassName = "MyWindow";
RegisterClassEx(&wc);
```

> –ö–ª–∞—Å—Å –æ–∫–Ω–∞ ‚Äî —ç—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –±—É–¥—É—â–∏—Ö –æ–∫–æ–Ω, –∞ –Ω–µ —Å–∞–º–æ –æ–∫–Ω–æ.
> (—Å—Ç–∏–ª—å, –∏–∫–æ–Ω–∫–∞, –∫—É—Ä—Å–æ—Ä, –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π)

2.2 –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞
```
HWND hwnd = CreateWindowEx(...);
```

>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ Windows:
>* —Å–æ–∑–¥–∞—ë—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–∫–Ω–∞
>* —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –µ—ë –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –û–°
>* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –æ–∫–Ω–∞ (HWND)\
>üëâ HWND ‚Äî —ç—Ç–æ –Ω–µ –∞–¥—Ä–µ—Å, –∞ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä (handle) ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É Windows –Ω–∞—Ö–æ–¥–∏—Ç —Å–≤–æ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –æ–∫–Ω–æ.

3. –û–∫–Ω–æ –∏ –∫–æ–Ω—Ç—Ä–æ–ª ‚Äî –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –ø–æ —Å—É—Ç–∏
>–í WinAPI:
>* –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ ‚Äî –æ–∫–Ω–æ
>* –∫–Ω–æ–ø–∫–∞ ‚Äî –æ–∫–Ω–æ
>* edit ‚Äî –æ–∫–Ω–æ
>* listbox ‚Äî –æ–∫–Ω–æ

>–í—Å–µ –æ–Ω–∏:
>* –∏–º–µ—é—Ç —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –û–°
>* –∏–º–µ—é—Ç —Å–≤–æ–π HWND
>* –∏–º–µ—é—Ç —Å–≤–æ—é –æ–∫–æ–Ω–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∏–ª–∏ —Ç–≤–æ—é)

>–ö–æ–Ω—Ç—Ä–æ–ª—ã ‚Äî —ç—Ç–æ –¥–æ—á–µ—Ä–Ω–∏–µ –æ–∫–Ω–∞.

4. –¶–∏–∫–ª —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–µ—Ä–¥—Ü–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã)

```
MSG msg;
while (GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
```
>Windows –∫–ª–∞–¥—ë—Ç —Å–æ–±—ã—Ç–∏—è –≤ –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Ç–æ–∫–∞.
```DispatchMessage``` –≤—ã–∑—ã–≤–∞–µ—Ç:
üëâ ```WndProc(hwnd, msg, wParam, lParam);```

5. –û–∫–æ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ (WndProc)

```LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)```
>–≠—Ç–æ –ø—Ä–∏—ë–º–Ω–∞—è —Å–æ–æ–±—â–µ–Ω–∏–π.

>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

>* ```hwnd``` ‚Äî –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –æ–∫–Ω–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
>* ```msg``` ‚Äî –∫–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è (```WM_COMMAND, WM_PAINT, WM_CLOSE```‚Ä¶)
>* ```wParam``` ‚Äî –¥–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (ID, —Ñ–ª–∞–≥–∏, –∫–æ–¥—ã)
>* ```lParam``` ‚Äî –¥–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (HWND, —É–∫–∞–∑–∞—Ç–µ–ª–∏, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)

>Windows —Å–∞–º–∞ –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é.

6. –ß—Ç–æ —Ç–∞–∫–æ–µ HWND –∏ –∫–∞–∫ Windows —Ö—Ä–∞–Ω–∏—Ç –æ–∫–Ω–∞
>–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–∫–Ω–æ, Windows:
>* –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –ø–æ–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–∫–Ω–∞
>* —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –µ—ë –≤ —Å–≤–æ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
>* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä (HWND)

>```HWND``` ‚Äî —ç—Ç–æ –∫–ª—é—á, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É Windows –Ω–∞—Ö–æ–¥–∏—Ç —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–∫–Ω–∞.
>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –æ–∫–Ω–∞.

7. WM_COMMAND ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
>–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É:
>–ö–æ–Ω—Ç—Ä–æ–ª (–∫–Ω–æ–ø–∫–∞) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É.
>```WndProc(hwndMain, WM_COMMAND, wParam, lParam);```

>–†–∞–∑–±–æ—Ä:\
```LOWORD(wParam) ‚Üí ID –∫–æ–Ω—Ç—Ä–æ–ª–∞  ```\
```HIWORD(wParam) ‚Üí –∫–æ–¥ —Å–æ–±—ã—Ç–∏—è (BN_CLICKED –∏ —Ç.–ø.) ```\
```lParam         ‚Üí HWND –∫–æ–Ω—Ç—Ä–æ–ª–∞  ```\
```hwnd           ‚Üí HWND —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–∫–Ω–∞```

>–ü—Ä–∏–º–µ—Ä:
```
case WM_COMMAND:
{
    switch (LOWORD(wParam))
    {
        case IDC_BUTTON_1:
            // –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É 1
            break;
    }
}
```

8. –í–∞–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ
>* Windows ‚Äî —Å–æ–æ–±—â–µ–Ω—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
>* –í—Å–µ –æ–∫–Ω–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—ã ‚Äî –æ–±—ä–µ–∫—Ç—ã –û–°
>* –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –Ω–µ —Å –æ–∫–Ω–∞–º–∏, –∞ —Å –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞–º–∏
>* –û–° —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–º—è—Ç—å—é, —Ç—ã ‚Äî –ª–æ–≥–∏–∫–æ–π
>* –¢–≤–æ—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚Äî —ç—Ç–æ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è

9. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
     ‚Üì
–û–° (–æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π)
     ‚Üì
GetMessage
     ‚Üì
DispatchMessage
     ‚Üì
WndProc(hwnd, msg, wParam, lParam)
     ‚Üì
–¢–≤–æ–π –∫–æ–¥
```

10. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–∞—Ä–∫–∞—Å WinAPI-–ø—Ä–æ–≥—Ä–∞–º–º—ã
```
WinMain ‚Üí RegisterClassEx ‚Üí CreateWindow  
        ‚Üí ShowWindow  
        ‚Üí while(GetMessage)  
        ‚Üí DispatchMessage  
        ‚Üí WndProc
```

üß† –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å WinAPI
>WinAPI ‚Äî —ç—Ç–æ –Ω–µ ¬´—Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫¬ª,
>—ç—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞–º–∏ Windows —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏–π.

_p.s –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–∫–æ–ø–∏–ø–∞—Å—Ç–∏–ª —Å chatgpt.com_
